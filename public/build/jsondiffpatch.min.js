!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.jsondiffpatch=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var environment=require("./environment"),DiffPatcher=require("./diffpatcher").DiffPatcher;exports.DiffPatcher=DiffPatcher,exports.create=function(e){return new DiffPatcher(e)},exports.dateReviver=require("./date-reviver");var defaultInstance;if(exports.diff=function(){return defaultInstance||(defaultInstance=new DiffPatcher),defaultInstance.diff.apply(defaultInstance,arguments)},exports.patch=function(){return defaultInstance||(defaultInstance=new DiffPatcher),defaultInstance.patch.apply(defaultInstance,arguments)},exports.unpatch=function(){return defaultInstance||(defaultInstance=new DiffPatcher),defaultInstance.unpatch.apply(defaultInstance,arguments)},exports.reverse=function(){return defaultInstance||(defaultInstance=new DiffPatcher),defaultInstance.reverse.apply(defaultInstance,arguments)},exports.clone=function(){return defaultInstance||(defaultInstance=new DiffPatcher),defaultInstance.clone.apply(defaultInstance,arguments)},environment.isBrowser)exports.homepage="https://github.com/benjamine/jsondiffpatch",exports.version="0.2.4";else{var packageInfoModuleName="../package.json",packageInfo=require(packageInfoModuleName);exports.homepage=packageInfo.homepage,exports.version=packageInfo.version;var formatterModuleName="./formatters",formatters=require(formatterModuleName);exports.formatters=formatters,exports.console=formatters.console}
},{"./date-reviver":8,"./diffpatcher":9,"./environment":10}],2:[function(require,module,exports){
function diff_match_patch(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0;diff_match_patch.Diff,diff_match_patch.prototype.diff_main=function(t,n,i,e){void 0===e&&(e=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var h=e;if(null==t||null==n)throw new Error("Null input. (diff_main)");if(t==n)return t?[[DIFF_EQUAL,t]]:[];void 0===i&&(i=!0);var r=i,a=this.diff_commonPrefix(t,n),f=t.substring(0,a);t=t.substring(a),n=n.substring(a),a=this.diff_commonSuffix(t,n);var s=t.substring(t.length-a);t=t.substring(0,t.length-a),n=n.substring(0,n.length-a);var l=this.diff_compute_(t,n,r,h);return f&&l.unshift([DIFF_EQUAL,f]),s&&l.push([DIFF_EQUAL,s]),this.diff_cleanupMerge(l),l},diff_match_patch.prototype.diff_compute_=function(t,n,i,e){var h;if(!t)return[[DIFF_INSERT,n]];if(!n)return[[DIFF_DELETE,t]];var r=t.length>n.length?t:n,a=t.length>n.length?n:t,f=r.indexOf(a);if(-1!=f)return h=[[DIFF_INSERT,r.substring(0,f)],[DIFF_EQUAL,a],[DIFF_INSERT,r.substring(f+a.length)]],t.length>n.length&&(h[0][0]=h[2][0]=DIFF_DELETE),h;if(1==a.length)return[[DIFF_DELETE,t],[DIFF_INSERT,n]];r=a=null;var s=this.diff_halfMatch_(t,n);if(s){var l=s[0],g=s[1],c=s[2],_=s[3],o=s[4],u=this.diff_main(l,c,i,e),p=this.diff_main(g,_,i,e);return u.concat([[DIFF_EQUAL,o]],p)}return i&&t.length>100&&n.length>100?this.diff_lineMode_(t,n,e):this.diff_bisect_(t,n,e)},diff_match_patch.prototype.diff_lineMode_=function(t,n,i){var e=this.diff_linesToChars_(t,n);t=e[0],n=e[1];var h=e[2],r=this.diff_bisect_(t,n,i);this.diff_charsToLines_(r,h),this.diff_cleanupSemantic(r),r.push([DIFF_EQUAL,""]);for(var a=0,f=0,s=0,l="",g="";a<r.length;){switch(r[a][0]){case DIFF_INSERT:s++,g+=r[a][1];break;case DIFF_DELETE:f++,l+=r[a][1];break;case DIFF_EQUAL:if(f>=1&&s>=1){var e=this.diff_main(l,g,!1,i);r.splice(a-f-s,f+s),a=a-f-s;for(var c=e.length-1;c>=0;c--)r.splice(a,0,e[c]);a+=e.length}s=0,f=0,l="",g=""}a++}return r.pop(),r},diff_match_patch.prototype.diff_bisect_=function(t,n,i){for(var e=t.length,h=n.length,r=Math.ceil((e+h)/2),a=r,f=2*r,s=new Array(f),l=new Array(f),g=0;g<f;g++)s[g]=-1,l[g]=-1;s[a+1]=0,l[a+1]=0;for(var c=e-h,_=c%2!=0,o=0,u=0,p=0,d=0,F=0;F<r&&!((new Date).getTime()>i);F++){for(var E=-F+o;E<=F-u;E+=2){var D,I=a+E;D=E==-F||E!=F&&s[I-1]<s[I+1]?s[I+1]:s[I-1]+1;for(var m=D-E;D<e&&m<h&&t.charAt(D)==n.charAt(m);)D++,m++;if(s[I]=D,D>e)u+=2;else if(m>h)o+=2;else if(_){var b=a+c-E;if(b>=0&&b<f&&-1!=l[b]){var v=e-l[b];if(D>=v)return this.diff_bisectSplit_(t,n,D,m,i)}}}for(var L=-F+p;L<=F-d;L+=2){var v,b=a+L;v=L==-F||L!=F&&l[b-1]<l[b+1]?l[b+1]:l[b-1]+1;for(var T=v-L;v<e&&T<h&&t.charAt(e-v-1)==n.charAt(h-T-1);)v++,T++;if(l[b]=v,v>e)d+=2;else if(T>h)p+=2;else if(!_){var I=a+c-L;if(I>=0&&I<f&&-1!=s[I]){var D=s[I],m=a+D-I;if(v=e-v,D>=v)return this.diff_bisectSplit_(t,n,D,m,i)}}}}return[[DIFF_DELETE,t],[DIFF_INSERT,n]]},diff_match_patch.prototype.diff_bisectSplit_=function(t,n,i,e,h){var r=t.substring(0,i),a=n.substring(0,e),f=t.substring(i),s=n.substring(e),l=this.diff_main(r,a,!1,h),g=this.diff_main(f,s,!1,h);return l.concat(g)},diff_match_patch.prototype.diff_linesToChars_=function(t,n){function i(t){for(var n="",i=0,r=-1,a=e.length;r<t.length-1;){r=t.indexOf("\n",i),-1==r&&(r=t.length-1);var f=t.substring(i,r+1);i=r+1,(h.hasOwnProperty?h.hasOwnProperty(f):void 0!==h[f])?n+=String.fromCharCode(h[f]):(n+=String.fromCharCode(a),h[f]=a,e[a++]=f)}return n}var e=[],h={};return e[0]="",[i(t),i(n),e]},diff_match_patch.prototype.diff_charsToLines_=function(t,n){for(var i=0;i<t.length;i++){for(var e=t[i][1],h=[],r=0;r<e.length;r++)h[r]=n[e.charCodeAt(r)];t[i][1]=h.join("")}},diff_match_patch.prototype.diff_commonPrefix=function(t,n){if(!t||!n||t.charAt(0)!=n.charAt(0))return 0;for(var i=0,e=Math.min(t.length,n.length),h=e,r=0;i<h;)t.substring(r,h)==n.substring(r,h)?(i=h,r=i):e=h,h=Math.floor((e-i)/2+i);return h},diff_match_patch.prototype.diff_commonSuffix=function(t,n){if(!t||!n||t.charAt(t.length-1)!=n.charAt(n.length-1))return 0;for(var i=0,e=Math.min(t.length,n.length),h=e,r=0;i<h;)t.substring(t.length-h,t.length-r)==n.substring(n.length-h,n.length-r)?(i=h,r=i):e=h,h=Math.floor((e-i)/2+i);return h},diff_match_patch.prototype.diff_commonOverlap_=function(t,n){var i=t.length,e=n.length;if(0==i||0==e)return 0;i>e?t=t.substring(i-e):i<e&&(n=n.substring(0,i));var h=Math.min(i,e);if(t==n)return h;for(var r=0,a=1;;){var f=t.substring(h-a),s=n.indexOf(f);if(-1==s)return r;a+=s,0!=s&&t.substring(h-a)!=n.substring(0,a)||(r=a,a++)}},diff_match_patch.prototype.diff_halfMatch_=function(t,n){function i(t,n,i){for(var e,h,r,f,s=t.substring(i,i+Math.floor(t.length/4)),l=-1,g="";-1!=(l=n.indexOf(s,l+1));){var c=a.diff_commonPrefix(t.substring(i),n.substring(l)),_=a.diff_commonSuffix(t.substring(0,i),n.substring(0,l));g.length<_+c&&(g=n.substring(l-_,l)+n.substring(l,l+c),e=t.substring(0,i-_),h=t.substring(i+c),r=n.substring(0,l-_),f=n.substring(l+c))}return 2*g.length>=t.length?[e,h,r,f,g]:null}if(this.Diff_Timeout<=0)return null;var e=t.length>n.length?t:n,h=t.length>n.length?n:t;if(e.length<4||2*h.length<e.length)return null;var r,a=this,f=i(e,h,Math.ceil(e.length/4)),s=i(e,h,Math.ceil(e.length/2));if(!f&&!s)return null;r=s?f&&f[4].length>s[4].length?f:s:f;var l,g,c,_;return t.length>n.length?(l=r[0],g=r[1],c=r[2],_=r[3]):(c=r[0],_=r[1],l=r[2],g=r[3]),[l,g,c,_,r[4]]},diff_match_patch.prototype.diff_cleanupSemantic=function(t){for(var n=!1,i=[],e=0,h=null,r=0,a=0,f=0,s=0,l=0;r<t.length;)t[r][0]==DIFF_EQUAL?(i[e++]=r,a=s,f=l,s=0,l=0,h=t[r][1]):(t[r][0]==DIFF_INSERT?s+=t[r][1].length:l+=t[r][1].length,null!==h&&h.length<=Math.max(a,f)&&h.length<=Math.max(s,l)&&(t.splice(i[e-1],0,[DIFF_DELETE,h]),t[i[e-1]+1][0]=DIFF_INSERT,e--,e--,r=e>0?i[e-1]:-1,a=0,f=0,s=0,l=0,h=null,n=!0)),r++;for(n&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),r=1;r<t.length;){if(t[r-1][0]==DIFF_DELETE&&t[r][0]==DIFF_INSERT){var g=t[r-1][1],c=t[r][1],_=this.diff_commonOverlap_(g,c);(_>=g.length/2||_>=c.length/2)&&(t.splice(r,0,[DIFF_EQUAL,c.substring(0,_)]),t[r-1][1]=g.substring(0,g.length-_),t[r+1][1]=c.substring(_),r++),r++}r++}},diff_match_patch.prototype.diff_cleanupSemanticLossless=function(t){function n(t,n){if(!t||!n)return 5;var f=0;return(t.charAt(t.length-1).match(i)||n.charAt(0).match(i))&&(f++,(t.charAt(t.length-1).match(e)||n.charAt(0).match(e))&&(f++,(t.charAt(t.length-1).match(h)||n.charAt(0).match(h))&&(f++,(t.match(r)||n.match(a))&&f++))),f}for(var i=/[^a-zA-Z0-9]/,e=/\s/,h=/[\r\n]/,r=/\n\r?\n$/,a=/^\r?\n\r?\n/,f=1;f<t.length-1;){if(t[f-1][0]==DIFF_EQUAL&&t[f+1][0]==DIFF_EQUAL){var s=t[f-1][1],l=t[f][1],g=t[f+1][1],c=this.diff_commonSuffix(s,l);if(c){var _=l.substring(l.length-c);s=s.substring(0,s.length-c),l=_+l.substring(0,l.length-c),g=_+g}for(var o=s,u=l,p=g,d=n(s,l)+n(l,g);l.charAt(0)===g.charAt(0);){s+=l.charAt(0),l=l.substring(1)+g.charAt(0),g=g.substring(1);var F=n(s,l)+n(l,g);F>=d&&(d=F,o=s,u=l,p=g)}t[f-1][1]!=o&&(o?t[f-1][1]=o:(t.splice(f-1,1),f--),t[f][1]=u,p?t[f+1][1]=p:(t.splice(f+1,1),f--))}f++}},diff_match_patch.prototype.diff_cleanupEfficiency=function(t){for(var n=!1,i=[],e=0,h="",r=0,a=!1,f=!1,s=!1,l=!1;r<t.length;)t[r][0]==DIFF_EQUAL?(t[r][1].length<this.Diff_EditCost&&(s||l)?(i[e++]=r,a=s,f=l,h=t[r][1]):(e=0,h=""),s=l=!1):(t[r][0]==DIFF_DELETE?l=!0:s=!0,h&&(a&&f&&s&&l||h.length<this.Diff_EditCost/2&&a+f+s+l==3)&&(t.splice(i[e-1],0,[DIFF_DELETE,h]),t[i[e-1]+1][0]=DIFF_INSERT,e--,h="",a&&f?(s=l=!0,e=0):(e--,r=e>0?i[e-1]:-1,s=l=!1),n=!0)),r++;n&&this.diff_cleanupMerge(t)},diff_match_patch.prototype.diff_cleanupMerge=function(t){t.push([DIFF_EQUAL,""]);for(var n,i=0,e=0,h=0,r="",a="";i<t.length;)switch(t[i][0]){case DIFF_INSERT:h++,a+=t[i][1],i++;break;case DIFF_DELETE:e++,r+=t[i][1],i++;break;case DIFF_EQUAL:e+h>1?(0!==e&&0!==h&&(n=this.diff_commonPrefix(a,r),0!==n&&(i-e-h>0&&t[i-e-h-1][0]==DIFF_EQUAL?t[i-e-h-1][1]+=a.substring(0,n):(t.splice(0,0,[DIFF_EQUAL,a.substring(0,n)]),i++),a=a.substring(n),r=r.substring(n)),0!==(n=this.diff_commonSuffix(a,r))&&(t[i][1]=a.substring(a.length-n)+t[i][1],a=a.substring(0,a.length-n),r=r.substring(0,r.length-n))),0===e?t.splice(i-e-h,e+h,[DIFF_INSERT,a]):0===h?t.splice(i-e-h,e+h,[DIFF_DELETE,r]):t.splice(i-e-h,e+h,[DIFF_DELETE,r],[DIFF_INSERT,a]),i=i-e-h+(e?1:0)+(h?1:0)+1):0!==i&&t[i-1][0]==DIFF_EQUAL?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,h=0,e=0,r="",a=""}""===t[t.length-1][1]&&t.pop();var f=!1;for(i=1;i<t.length-1;)t[i-1][0]==DIFF_EQUAL&&t[i+1][0]==DIFF_EQUAL&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),f=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),f=!0)),i++;f&&this.diff_cleanupMerge(t)},diff_match_patch.prototype.diff_xIndex=function(t,n){var i,e=0,h=0,r=0,a=0;for(i=0;i<t.length&&(t[i][0]!==DIFF_INSERT&&(e+=t[i][1].length),t[i][0]!==DIFF_DELETE&&(h+=t[i][1].length),!(e>n));i++)r=e,a=h;return t.length!=i&&t[i][0]===DIFF_DELETE?a:a+(n-r)},diff_match_patch.prototype.diff_prettyHtml=function(t){for(var n=[],i=0,e=/&/g,h=/</g,r=/>/g,a=/\n/g,f=0;f<t.length;f++){var s=t[f][0],l=t[f][1],g=l.replace(e,"&amp;").replace(h,"&lt;").replace(r,"&gt;").replace(a,"&para;<br>");switch(s){case DIFF_INSERT:n[f]='<ins style="background:#e6ffe6;">'+g+"</ins>";break;case DIFF_DELETE:n[f]='<del style="background:#ffe6e6;">'+g+"</del>";break;case DIFF_EQUAL:n[f]="<span>"+g+"</span>"}s!==DIFF_DELETE&&(i+=l.length)}return n.join("")},diff_match_patch.prototype.diff_text1=function(t){for(var n=[],i=0;i<t.length;i++)t[i][0]!==DIFF_INSERT&&(n[i]=t[i][1]);return n.join("")},diff_match_patch.prototype.diff_text2=function(t){for(var n=[],i=0;i<t.length;i++)t[i][0]!==DIFF_DELETE&&(n[i]=t[i][1]);return n.join("")},diff_match_patch.prototype.diff_levenshtein=function(t){for(var n=0,i=0,e=0,h=0;h<t.length;h++){var r=t[h][0],a=t[h][1];switch(r){case DIFF_INSERT:i+=a.length;break;case DIFF_DELETE:e+=a.length;break;case DIFF_EQUAL:n+=Math.max(i,e),i=0,e=0}}return n+=Math.max(i,e)},diff_match_patch.prototype.diff_toDelta=function(t){for(var n=[],i=0;i<t.length;i++)switch(t[i][0]){case DIFF_INSERT:n[i]="+"+encodeURI(t[i][1]);break;case DIFF_DELETE:n[i]="-"+t[i][1].length;break;case DIFF_EQUAL:n[i]="="+t[i][1].length}return n.join("\t").replace(/%20/g," ")},diff_match_patch.prototype.diff_fromDelta=function(t,n){for(var i=[],e=0,h=0,r=n.split(/\t/g),a=0;a<r.length;a++){var f=r[a].substring(1);switch(r[a].charAt(0)){case"+":try{i[e++]=[DIFF_INSERT,decodeURI(f)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+f)}break;case"-":case"=":var s=parseInt(f,10);if(isNaN(s)||s<0)throw new Error("Invalid number in diff_fromDelta: "+f);var l=t.substring(h,h+=s);"="==r[a].charAt(0)?i[e++]=[DIFF_EQUAL,l]:i[e++]=[DIFF_DELETE,l];break;default:if(r[a])throw new Error("Invalid diff operation in diff_fromDelta: "+r[a])}}if(h!=t.length)throw new Error("Delta length ("+h+") does not equal source text length ("+t.length+").");return i},diff_match_patch.prototype.match_main=function(t,n,i){if(null==t||null==n||null==i)throw new Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,t.length)),t==n?0:t.length?t.substring(i,i+n.length)==n?i:this.match_bitap_(t,n,i):-1},diff_match_patch.prototype.match_bitap_=function(t,n,i){function e(t,e){var h=t/n.length,a=Math.abs(i-e);return r.Match_Distance?h+a/r.Match_Distance:a?1:h}if(n.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var h=this.match_alphabet_(n),r=this,a=this.Match_Threshold,f=t.indexOf(n,i);-1!=f&&(a=Math.min(e(0,f),a),-1!=(f=t.lastIndexOf(n,i+n.length))&&(a=Math.min(e(0,f),a)));var s=1<<n.length-1;f=-1;for(var l,g,c,_=n.length+t.length,o=0;o<n.length;o++){for(l=0,g=_;l<g;)e(o,i+g)<=a?l=g:_=g,g=Math.floor((_-l)/2+l);_=g;var u=Math.max(1,i-g+1),p=Math.min(i+g,t.length)+n.length,d=Array(p+2);d[p+1]=(1<<o)-1;for(var F=p;F>=u;F--){var E=h[t.charAt(F-1)];if(d[F]=0===o?(d[F+1]<<1|1)&E:(d[F+1]<<1|1)&E|(c[F+1]|c[F])<<1|1|c[F+1],d[F]&s){var D=e(o,F-1);if(D<=a){if(a=D,!((f=F-1)>i))break;u=Math.max(1,2*i-f)}}}if(e(o+1,i)>a)break;c=d}return f},diff_match_patch.prototype.match_alphabet_=function(t){for(var n={},i=0;i<t.length;i++)n[t.charAt(i)]=0;for(var i=0;i<t.length;i++)n[t.charAt(i)]|=1<<t.length-i-1;return n},diff_match_patch.prototype.patch_addContext_=function(t,n){if(0!=n.length){for(var i=n.substring(t.start2,t.start2+t.length1),e=0;n.indexOf(i)!=n.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)e+=this.Patch_Margin,i=n.substring(t.start2-e,t.start2+t.length1+e);e+=this.Patch_Margin;var h=n.substring(t.start2-e,t.start2);h&&t.diffs.unshift([DIFF_EQUAL,h]);var r=n.substring(t.start2+t.length1,t.start2+t.length1+e);r&&t.diffs.push([DIFF_EQUAL,r]),t.start1-=h.length,t.start2-=h.length,t.length1+=h.length+r.length,t.length2+=h.length+r.length}},diff_match_patch.prototype.patch_make=function(t,n,i){var e,h;if("string"==typeof t&&"string"==typeof n&&void 0===i)e=t,h=this.diff_main(e,n,!0),h.length>2&&(this.diff_cleanupSemantic(h),this.diff_cleanupEfficiency(h));else if(t&&"object"==typeof t&&void 0===n&&void 0===i)h=t,e=this.diff_text1(h);else if("string"==typeof t&&n&&"object"==typeof n&&void 0===i)e=t,h=n;else{if("string"!=typeof t||"string"!=typeof n||!i||"object"!=typeof i)throw new Error("Unknown call format to patch_make.");e=t,h=i}if(0===h.length)return[];for(var r=[],a=new diff_match_patch.patch_obj,f=0,s=0,l=0,g=e,c=e,_=0;_<h.length;_++){var o=h[_][0],u=h[_][1];switch(f||o===DIFF_EQUAL||(a.start1=s,a.start2=l),o){case DIFF_INSERT:a.diffs[f++]=h[_],a.length2+=u.length,c=c.substring(0,l)+u+c.substring(l);break;case DIFF_DELETE:a.length1+=u.length,a.diffs[f++]=h[_],c=c.substring(0,l)+c.substring(l+u.length);break;case DIFF_EQUAL:u.length<=2*this.Patch_Margin&&f&&h.length!=_+1?(a.diffs[f++]=h[_],a.length1+=u.length,a.length2+=u.length):u.length>=2*this.Patch_Margin&&f&&(this.patch_addContext_(a,g),r.push(a),a=new diff_match_patch.patch_obj,f=0,g=c,s=l)}o!==DIFF_INSERT&&(s+=u.length),o!==DIFF_DELETE&&(l+=u.length)}return f&&(this.patch_addContext_(a,g),r.push(a)),r},diff_match_patch.prototype.patch_deepCopy=function(t){for(var n=[],i=0;i<t.length;i++){var e=t[i],h=new diff_match_patch.patch_obj;h.diffs=[];for(var r=0;r<e.diffs.length;r++)h.diffs[r]=e.diffs[r].slice();h.start1=e.start1,h.start2=e.start2,h.length1=e.length1,h.length2=e.length2,n[i]=h}return n},diff_match_patch.prototype.patch_apply=function(t,n){if(0==t.length)return[n,[]];t=this.patch_deepCopy(t);var i=this.patch_addPadding(t);n=i+n+i,this.patch_splitMax(t);for(var e=0,h=[],r=0;r<t.length;r++){var a,f=t[r].start2+e,s=this.diff_text1(t[r].diffs),l=-1;if(s.length>this.Match_MaxBits?-1!=(a=this.match_main(n,s.substring(0,this.Match_MaxBits),f))&&(-1==(l=this.match_main(n,s.substring(s.length-this.Match_MaxBits),f+s.length-this.Match_MaxBits))||a>=l)&&(a=-1):a=this.match_main(n,s,f),-1==a)h[r]=!1,e-=t[r].length2-t[r].length1;else{h[r]=!0,e=a-f;var g;if(g=-1==l?n.substring(a,a+s.length):n.substring(a,l+this.Match_MaxBits),s==g)n=n.substring(0,a)+this.diff_text2(t[r].diffs)+n.substring(a+s.length);else{var c=this.diff_main(s,g,!1);if(s.length>this.Match_MaxBits&&this.diff_levenshtein(c)/s.length>this.Patch_DeleteThreshold)h[r]=!1;else{this.diff_cleanupSemanticLossless(c);for(var _,o=0,u=0;u<t[r].diffs.length;u++){var p=t[r].diffs[u];p[0]!==DIFF_EQUAL&&(_=this.diff_xIndex(c,o)),p[0]===DIFF_INSERT?n=n.substring(0,a+_)+p[1]+n.substring(a+_):p[0]===DIFF_DELETE&&(n=n.substring(0,a+_)+n.substring(a+this.diff_xIndex(c,o+p[1].length))),p[0]!==DIFF_DELETE&&(o+=p[1].length)}}}}}return n=n.substring(i.length,n.length-i.length),[n,h]},diff_match_patch.prototype.patch_addPadding=function(t){for(var n=this.Patch_Margin,i="",e=1;e<=n;e++)i+=String.fromCharCode(e);for(var e=0;e<t.length;e++)t[e].start1+=n,t[e].start2+=n;var h=t[0],r=h.diffs;if(0==r.length||r[0][0]!=DIFF_EQUAL)r.unshift([DIFF_EQUAL,i]),h.start1-=n,h.start2-=n,h.length1+=n,h.length2+=n;else if(n>r[0][1].length){var a=n-r[0][1].length;r[0][1]=i.substring(r[0][1].length)+r[0][1],h.start1-=a,h.start2-=a,h.length1+=a,h.length2+=a}if(h=t[t.length-1],r=h.diffs,0==r.length||r[r.length-1][0]!=DIFF_EQUAL)r.push([DIFF_EQUAL,i]),h.length1+=n,h.length2+=n;else if(n>r[r.length-1][1].length){var a=n-r[r.length-1][1].length;r[r.length-1][1]+=i.substring(0,a),h.length1+=a,h.length2+=a}return i},diff_match_patch.prototype.patch_splitMax=function(t){for(var n=this.Match_MaxBits,i=0;i<t.length;i++)if(t[i].length1>n){var e=t[i];t.splice(i--,1);for(var h=e.start1,r=e.start2,a="";0!==e.diffs.length;){var f=new diff_match_patch.patch_obj,s=!0;for(f.start1=h-a.length,f.start2=r-a.length,""!==a&&(f.length1=f.length2=a.length,f.diffs.push([DIFF_EQUAL,a]));0!==e.diffs.length&&f.length1<n-this.Patch_Margin;){var l=e.diffs[0][0],g=e.diffs[0][1];l===DIFF_INSERT?(f.length2+=g.length,r+=g.length,f.diffs.push(e.diffs.shift()),s=!1):l===DIFF_DELETE&&1==f.diffs.length&&f.diffs[0][0]==DIFF_EQUAL&&g.length>2*n?(f.length1+=g.length,h+=g.length,s=!1,f.diffs.push([l,g]),e.diffs.shift()):(g=g.substring(0,n-f.length1-this.Patch_Margin),f.length1+=g.length,h+=g.length,l===DIFF_EQUAL?(f.length2+=g.length,r+=g.length):s=!1,f.diffs.push([l,g]),g==e.diffs[0][1]?e.diffs.shift():e.diffs[0][1]=e.diffs[0][1].substring(g.length))}a=this.diff_text2(f.diffs),a=a.substring(a.length-this.Patch_Margin);var c=this.diff_text1(e.diffs).substring(0,this.Patch_Margin);""!==c&&(f.length1+=c.length,f.length2+=c.length,0!==f.diffs.length&&f.diffs[f.diffs.length-1][0]===DIFF_EQUAL?f.diffs[f.diffs.length-1][1]+=c:f.diffs.push([DIFF_EQUAL,c])),s||t.splice(++i,0,f)}}},diff_match_patch.prototype.patch_toText=function(t){for(var n=[],i=0;i<t.length;i++)n[i]=t[i];return n.join("")},diff_match_patch.prototype.patch_fromText=function(t){var n=[];if(!t)return n;for(var i=t.split("\n"),e=0,h=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;e<i.length;){var r=i[e].match(h);if(!r)throw new Error("Invalid patch string: "+i[e]);var a=new diff_match_patch.patch_obj;for(n.push(a),a.start1=parseInt(r[1],10),""===r[2]?(a.start1--,a.length1=1):"0"==r[2]?a.length1=0:(a.start1--,a.length1=parseInt(r[2],10)),a.start2=parseInt(r[3],10),""===r[4]?(a.start2--,a.length2=1):"0"==r[4]?a.length2=0:(a.start2--,a.length2=parseInt(r[4],10)),e++;e<i.length;){var f=i[e].charAt(0);try{var s=decodeURI(i[e].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+s)}if("-"==f)a.diffs.push([DIFF_DELETE,s]);else if("+"==f)a.diffs.push([DIFF_INSERT,s]);else if(" "==f)a.diffs.push([DIFF_EQUAL,s]);else{if("@"==f)break;if(""!==f)throw new Error('Invalid patch mode "'+f+'" in: '+s)}e++}}return n},diff_match_patch.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},diff_match_patch.patch_obj.prototype.toString=function(){var t,n;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,n=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var i,e=["@@ -"+t+" +"+n+" @@\n"],h=0;h<this.diffs.length;h++){switch(this.diffs[h][0]){case DIFF_INSERT:i="+";break;case DIFF_DELETE:i="-";break;case DIFF_EQUAL:i=" "}e[h+1]=i+encodeURI(this.diffs[h][1])+"\n"}return e.join("").replace(/%20/g," ")},this.diff_match_patch=diff_match_patch,this.DIFF_DELETE=DIFF_DELETE,this.DIFF_INSERT=DIFF_INSERT,this.DIFF_EQUAL=DIFF_EQUAL;
},{}],3:[function(require,module,exports){
function cloneRegExp(r){var e=/^\/(.*)\/([gimyu]*)$/.exec(r.toString());return new RegExp(e[1],e[2])}function clone(r){if("object"!=typeof r)return r;if(null===r)return null;if(isArray(r))return r.map(clone);if(r instanceof Date)return new Date(r.getTime());if(r instanceof RegExp)return cloneRegExp(r);var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=clone(r[n]));return e}var isArray="function"==typeof Array.isArray?Array.isArray:function(r){return r instanceof Array};module.exports=clone;
},{}],4:[function(require,module,exports){
var Pipe=require("../pipe").Pipe,Context=function(){};Context.prototype.setResult=function(t){return this.result=t,this.hasResult=!0,this},Context.prototype.exit=function(){return this.exiting=!0,this},Context.prototype.switchTo=function(t,i){return"string"==typeof t||t instanceof Pipe?this.nextPipe=t:(this.next=t,i&&(this.nextPipe=i)),this},Context.prototype.push=function(t,i){return t.parent=this,void 0!==i&&(t.childName=i),t.root=this.root||this,t.options=t.options||this.options,this.children?(this.children[this.children.length-1].next=t,this.children.push(t)):(this.children=[t],this.nextAfterChildren=this.next||null,this.next=t),t.next=this,this},exports.Context=Context;
},{"../pipe":17}],5:[function(require,module,exports){
var Context=require("./context").Context,defaultClone=require("../clone"),DiffContext=function(t,e){this.left=t,this.right=e,this.pipe="diff"};DiffContext.prototype=new Context,DiffContext.prototype.setResult=function(t){if(this.options.cloneDiffValues&&"object"==typeof t){var e="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:defaultClone;"object"==typeof t[0]&&(t[0]=e(t[0])),"object"==typeof t[1]&&(t[1]=e(t[1]))}return Context.prototype.setResult.apply(this,arguments)},exports.DiffContext=DiffContext;
},{"../clone":3,"./context":4}],6:[function(require,module,exports){
var Context=require("./context").Context,PatchContext=function(t,e){this.left=t,this.delta=e,this.pipe="patch"};PatchContext.prototype=new Context,exports.PatchContext=PatchContext;
},{"./context":4}],7:[function(require,module,exports){
var Context=require("./context").Context,ReverseContext=function(e){this.delta=e,this.pipe="reverse"};ReverseContext.prototype=new Context,exports.ReverseContext=ReverseContext;
},{"./context":4}],8:[function(require,module,exports){
module.exports=function(d,e){var t;return"string"==typeof e&&(t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d*))?(Z|([+\-])(\d{2}):(\d{2}))$/.exec(e))?new Date(Date.UTC(+t[1],+t[2]-1,+t[3],+t[4],+t[5],+t[6],+(t[7]||0))):e};
},{}],9:[function(require,module,exports){
var Processor=require("./processor").Processor,Pipe=require("./pipe").Pipe,DiffContext=require("./contexts/diff").DiffContext,PatchContext=require("./contexts/patch").PatchContext,ReverseContext=require("./contexts/reverse").ReverseContext,clone=require("./clone"),trivial=require("./filters/trivial"),nested=require("./filters/nested"),arrays=require("./filters/arrays"),dates=require("./filters/dates"),texts=require("./filters/texts"),DiffPatcher=function(e){this.processor=new Processor(e),this.processor.pipe(new Pipe("diff").append(nested.collectChildrenDiffFilter,trivial.diffFilter,dates.diffFilter,texts.diffFilter,nested.objectsDiffFilter,arrays.diffFilter).shouldHaveResult()),this.processor.pipe(new Pipe("patch").append(nested.collectChildrenPatchFilter,arrays.collectChildrenPatchFilter,trivial.patchFilter,texts.patchFilter,nested.patchFilter,arrays.patchFilter).shouldHaveResult()),this.processor.pipe(new Pipe("reverse").append(nested.collectChildrenReverseFilter,arrays.collectChildrenReverseFilter,trivial.reverseFilter,texts.reverseFilter,nested.reverseFilter,arrays.reverseFilter).shouldHaveResult())};DiffPatcher.prototype.options=function(){return this.processor.options.apply(this.processor,arguments)},DiffPatcher.prototype.diff=function(e,r){return this.processor.process(new DiffContext(e,r))},DiffPatcher.prototype.patch=function(e,r){return this.processor.process(new PatchContext(e,r))},DiffPatcher.prototype.reverse=function(e){return this.processor.process(new ReverseContext(e))},DiffPatcher.prototype.unpatch=function(e,r){return this.patch(e,this.reverse(r))},DiffPatcher.prototype.clone=function(e){return clone(e)},exports.DiffPatcher=DiffPatcher;
},{"./clone":3,"./contexts/diff":5,"./contexts/patch":6,"./contexts/reverse":7,"./filters/arrays":11,"./filters/dates":12,"./filters/nested":14,"./filters/texts":15,"./filters/trivial":16,"./pipe":17,"./processor":18}],10:[function(require,module,exports){
exports.isBrowser="undefined"!=typeof window;
},{}],11:[function(require,module,exports){
function arraysHaveMatchByRef(e,t,r,i){for(var a=0;a<r;a++)for(var n=e[a],l=0;l<i;l++){var s=t[l];if(a!==l&&n===s)return!0}}function matchItems(e,t,r,i,a){var n=e[r],l=t[i];if(n===l)return!0;if("object"!=typeof n||"object"!=typeof l)return!1;var s=a.objectHash;if(!s)return a.matchByPosition&&r===i;var o,f;return"number"==typeof r?(a.hashCache1=a.hashCache1||[],void 0===(o=a.hashCache1[r])&&(a.hashCache1[r]=o=s(n,r))):o=s(n),void 0!==o&&("number"==typeof i?(a.hashCache2=a.hashCache2||[],void 0===(f=a.hashCache2[i])&&(a.hashCache2[i]=f=s(l,i))):f=s(l),void 0!==f&&o===f)}var DiffContext=require("../contexts/diff").DiffContext,PatchContext=require("../contexts/patch").PatchContext,ReverseContext=require("../contexts/reverse").ReverseContext,lcs=require("./lcs"),ARRAY_MOVE=3,isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},arrayIndexOf="function"==typeof Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var r=e.length,i=0;i<r;i++)if(e[i]===t)return i;return-1},diffFilter=function(e){if(e.leftIsArray){var t,r,i,a,n={objectHash:e.options&&e.options.objectHash,matchByPosition:e.options&&e.options.matchByPosition},l=0,s=0,o=e.left,f=e.right,c=o.length,h=f.length;for(c>0&&h>0&&!n.objectHash&&"boolean"!=typeof n.matchByPosition&&(n.matchByPosition=!arraysHaveMatchByRef(o,f,c,h));l<c&&l<h&&matchItems(o,f,l,l,n);)t=l,a=new DiffContext(e.left[t],e.right[t]),e.push(a,t),l++;for(;s+l<c&&s+l<h&&matchItems(o,f,c-1-s,h-1-s,n);)r=c-1-s,i=h-1-s,a=new DiffContext(e.left[r],e.right[i]),e.push(a,i),s++;var u;if(l+s===c){if(c===h)return void e.setResult(void 0).exit();for(u=u||{_t:"a"},t=l;t<h-s;t++)u[t]=[f[t]];return void e.setResult(u).exit()}if(l+s===h){for(u=u||{_t:"a"},t=l;t<c-s;t++)u["_"+t]=[o[t],0,0];return void e.setResult(u).exit()}delete n.hashCache1,delete n.hashCache2;var d=o.slice(l,c-s),v=f.slice(l,h-s),p=lcs.get(d,v,matchItems,n),y=[];for(u=u||{_t:"a"},t=l;t<c-s;t++)arrayIndexOf(p.indices1,t-l)<0&&(u["_"+t]=[o[t],0,0],y.push(t));var x=!0;e.options&&e.options.arrays&&!1===e.options.arrays.detectMove&&(x=!1);var m=!1;e.options&&e.options.arrays&&e.options.arrays.includeValueOnMove&&(m=!0);var C=y.length;for(t=l;t<h-s;t++){var R=arrayIndexOf(p.indices2,t-l);if(R<0){var A=!1;if(x&&C>0)for(var _=0;_<C;_++)if(r=y[_],matchItems(d,v,r-l,t-l,n)){u["_"+r].splice(1,2,t,ARRAY_MOVE),m||(u["_"+r][0]=""),i=t,a=new DiffContext(e.left[r],e.right[i]),e.push(a,i),y.splice(_,1),A=!0;break}A||(u[t]=[f[t]])}else r=p.indices1[R]+l,i=p.indices2[R]+l,a=new DiffContext(e.left[r],e.right[i]),e.push(a,i)}e.setResult(u).exit()}};diffFilter.filterName="arrays";var compare={numerically:function(e,t){return e-t},numericallyBy:function(e){return function(t,r){return t[e]-r[e]}}},patchFilter=function(e){if(e.nested&&"a"===e.delta._t){var t,r,i=e.delta,a=e.left,n=[],l=[],s=[];for(t in i)if("_t"!==t)if("_"===t[0]){if(0!==i[t][2]&&i[t][2]!==ARRAY_MOVE)throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+i[t][2]);n.push(parseInt(t.slice(1),10))}else 1===i[t].length?l.push({index:parseInt(t,10),value:i[t][0]}):s.push({index:parseInt(t,10),delta:i[t]});for(n=n.sort(compare.numerically),t=n.length-1;t>=0;t--){r=n[t];var o=i["_"+r],f=a.splice(r,1)[0];o[2]===ARRAY_MOVE&&l.push({index:o[1],value:f})}l=l.sort(compare.numericallyBy("index"));var c=l.length;for(t=0;t<c;t++){var h=l[t];a.splice(h.index,0,h.value)}var u,d=s.length;if(d>0)for(t=0;t<d;t++){var v=s[t];u=new PatchContext(e.left[v.index],v.delta),e.push(u,v.index)}if(!e.children)return void e.setResult(e.left).exit();e.exit()}};patchFilter.filterName="arrays";var collectChildrenPatchFilter=function(e){if(e&&e.children&&"a"===e.delta._t){for(var t,r=e.children.length,i=0;i<r;i++)t=e.children[i],e.left[t.childName]=t.result;e.setResult(e.left).exit()}};collectChildrenPatchFilter.filterName="arraysCollectChildren";var reverseFilter=function(e){if(!e.nested)return void(e.delta[2]===ARRAY_MOVE&&(e.newName="_"+e.delta[1],e.setResult([e.delta[0],parseInt(e.childName.substr(1),10),ARRAY_MOVE]).exit()));if("a"===e.delta._t){var t,r;for(t in e.delta)"_t"!==t&&(r=new ReverseContext(e.delta[t]),e.push(r,t));e.exit()}};reverseFilter.filterName="arrays";var reverseArrayDeltaIndex=function(e,t,r){if("string"==typeof t&&"_"===t[0])return parseInt(t.substr(1),10);if(isArray(r)&&0===r[2])return"_"+t;var i=+t;for(var a in e){var n=e[a];if(isArray(n))if(n[2]===ARRAY_MOVE){var l=parseInt(a.substr(1),10),s=n[1];if(s===+t)return l;l<=i&&s>i?i++:l>=i&&s<i&&i--}else if(0===n[2]){var o=parseInt(a.substr(1),10);o<=i&&i++}else 1===n.length&&a<=i&&i--}return i},collectChildrenReverseFilter=function(e){if(e&&e.children&&"a"===e.delta._t){for(var t,r=e.children.length,i={_t:"a"},a=0;a<r;a++){t=e.children[a];var n=t.newName;void 0===n&&(n=reverseArrayDeltaIndex(e.delta,t.childName,t.result)),i[n]!==t.result&&(i[n]=t.result)}e.setResult(i).exit()}};collectChildrenReverseFilter.filterName="arraysCollectChildren",exports.diffFilter=diffFilter,exports.patchFilter=patchFilter,exports.collectChildrenPatchFilter=collectChildrenPatchFilter,exports.reverseFilter=reverseFilter,exports.collectChildrenReverseFilter=collectChildrenReverseFilter;
},{"../contexts/diff":5,"../contexts/patch":6,"../contexts/reverse":7,"./lcs":13}],12:[function(require,module,exports){
var diffFilter=function(t){t.left instanceof Date?(t.right instanceof Date?t.left.getTime()!==t.right.getTime()?t.setResult([t.left,t.right]):t.setResult(void 0):t.setResult([t.left,t.right]),t.exit()):t.right instanceof Date&&t.setResult([t.left,t.right]).exit()};diffFilter.filterName="dates",exports.diffFilter=diffFilter;
},{}],13:[function(require,module,exports){
var defaultMatch=function(t,e,n,r){return t[n]===e[r]},lengthMatrix=function(t,e,n,r){var c,a,i=t.length,u=e.length,f=[i+1];for(c=0;c<i+1;c++)for(f[c]=[u+1],a=0;a<u+1;a++)f[c][a]=0;for(f.match=n,c=1;c<i+1;c++)for(a=1;a<u+1;a++)n(t,e,c-1,a-1,r)?f[c][a]=f[c-1][a-1]+1:f[c][a]=Math.max(f[c-1][a],f[c][a-1]);return f},backtrack=function(t,e,n,r,c,a){if(0===r||0===c)return{sequence:[],indices1:[],indices2:[]};if(t.match(e,n,r-1,c-1,a)){var i=backtrack(t,e,n,r-1,c-1,a);return i.sequence.push(e[r-1]),i.indices1.push(r-1),i.indices2.push(c-1),i}return t[r][c-1]>t[r-1][c]?backtrack(t,e,n,r,c-1,a):backtrack(t,e,n,r-1,c,a)},get=function(t,e,n,r){r=r||{};var c=lengthMatrix(t,e,n||defaultMatch,r),a=backtrack(c,t,e,t.length,e.length,r);return"string"==typeof t&&"string"==typeof e&&(a.sequence=a.sequence.join("")),a};exports.get=get;
},{}],14:[function(require,module,exports){
var DiffContext=require("../contexts/diff").DiffContext,PatchContext=require("../contexts/patch").PatchContext,ReverseContext=require("../contexts/reverse").ReverseContext,collectChildrenDiffFilter=function(e){if(e&&e.children){for(var t,l=e.children.length,r=e.result,i=0;i<l;i++)t=e.children[i],void 0!==t.result&&(r=r||{},r[t.childName]=t.result);r&&e.leftIsArray&&(r._t="a"),e.setResult(r).exit()}};collectChildrenDiffFilter.filterName="collectChildren";var objectsDiffFilter=function(e){if(!e.leftIsArray&&"object"===e.leftType){var t,l,r=e.options.propertyFilter;for(t in e.left)Object.prototype.hasOwnProperty.call(e.left,t)&&(r&&!r(t,e)||(l=new DiffContext(e.left[t],e.right[t]),e.push(l,t)));for(t in e.right)Object.prototype.hasOwnProperty.call(e.right,t)&&(r&&!r(t,e)||void 0===e.left[t]&&(l=new DiffContext(void 0,e.right[t]),e.push(l,t)));if(!e.children||0===e.children.length)return void e.setResult(void 0).exit();e.exit()}};objectsDiffFilter.filterName="objects";var patchFilter=function(e){if(e.nested&&!e.delta._t){var t,l;for(t in e.delta)l=new PatchContext(e.left[t],e.delta[t]),e.push(l,t);e.exit()}};patchFilter.filterName="objects";var collectChildrenPatchFilter=function(e){if(e&&e.children&&!e.delta._t){for(var t,l=e.children.length,r=0;r<l;r++)t=e.children[r],Object.prototype.hasOwnProperty.call(e.left,t.childName)&&void 0===t.result?delete e.left[t.childName]:e.left[t.childName]!==t.result&&(e.left[t.childName]=t.result);e.setResult(e.left).exit()}};collectChildrenPatchFilter.filterName="collectChildren";var reverseFilter=function(e){if(e.nested&&!e.delta._t){var t,l;for(t in e.delta)l=new ReverseContext(e.delta[t]),e.push(l,t);e.exit()}};reverseFilter.filterName="objects";var collectChildrenReverseFilter=function(e){if(e&&e.children&&!e.delta._t){for(var t,l=e.children.length,r={},i=0;i<l;i++)t=e.children[i],r[t.childName]!==t.result&&(r[t.childName]=t.result);e.setResult(r).exit()}};collectChildrenReverseFilter.filterName="collectChildren",exports.collectChildrenDiffFilter=collectChildrenDiffFilter,exports.objectsDiffFilter=objectsDiffFilter,exports.patchFilter=patchFilter,exports.collectChildrenPatchFilter=collectChildrenPatchFilter,exports.reverseFilter=reverseFilter,exports.collectChildrenReverseFilter=collectChildrenReverseFilter;
},{"../contexts/diff":5,"../contexts/patch":6,"../contexts/reverse":7}],15:[function(require,module,exports){
var TEXT_DIFF=2,DEFAULT_MIN_LENGTH=60,cachedDiffPatch=null,getDiffMatchPatch=function(t){if(!cachedDiffPatch){var e;if("undefined"!=typeof diff_match_patch)e="function"==typeof diff_match_patch?new diff_match_patch:new diff_match_patch.diff_match_patch;else if("function"==typeof require)try{var i=require("../../public/external/diff_match_patch_uncompressed");e=new i.diff_match_patch}catch(t){e=null}if(!e){if(!t)return null;var f=new Error("text diff_match_patch library not found");throw f.diff_match_patch_not_found=!0,f}cachedDiffPatch={diff:function(t,i){return e.patch_toText(e.patch_make(t,i))},patch:function(t,i){for(var f=e.patch_apply(e.patch_fromText(i),t),r=0;r<f[1].length;r++)if(!f[1][r]){var a=new Error("text patch failed");a.textPatchFailed=!0}return f[0]}}}return cachedDiffPatch},diffFilter=function(t){if("string"===t.leftType){var e=t.options&&t.options.textDiff&&t.options.textDiff.minLength||DEFAULT_MIN_LENGTH;if(t.left.length<e||t.right.length<e)return void t.setResult([t.left,t.right]).exit();var i=getDiffMatchPatch();if(!i)return void t.setResult([t.left,t.right]).exit();var f=i.diff;t.setResult([f(t.left,t.right),0,TEXT_DIFF]).exit()}};diffFilter.filterName="texts";var patchFilter=function(t){if(!t.nested&&t.delta[2]===TEXT_DIFF){var e=getDiffMatchPatch(!0).patch;t.setResult(e(t.left,t.delta[0])).exit()}};patchFilter.filterName="texts";var textDeltaReverse=function(t){var e,i,f,r,a,c,l=null,n=/^@@ +\-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(f=t.split("\n"),e=0,i=f.length;e<i;e++){r=f[e];var h=r.slice(0,1);"@"===h?(l=n.exec(r),c=e,null,null,f[c]="@@ -"+l[3]+","+l[4]+" +"+l[1]+","+l[2]+" @@"):"+"===h?(e,f[e]="-"+f[e].slice(1),"+"===f[e-1].slice(0,1)&&(a=f[e],f[e]=f[e-1],f[e-1]=a)):"-"===h&&(e,f[e]="+"+f[e].slice(1))}return f.join("\n")},reverseFilter=function(t){t.nested||t.delta[2]===TEXT_DIFF&&t.setResult([textDeltaReverse(t.delta[0]),0,TEXT_DIFF]).exit()};reverseFilter.filterName="texts",exports.diffFilter=diffFilter,exports.patchFilter=patchFilter,exports.reverseFilter=reverseFilter;
},{"../../public/external/diff_match_patch_uncompressed":2}],16:[function(require,module,exports){
var isArray="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},diffFilter=function(t){if(t.left===t.right)return void t.setResult(void 0).exit();if(void 0===t.left){if("function"==typeof t.right)throw new Error("functions are not supported");return void t.setResult([t.right]).exit()}if(void 0===t.right)return void t.setResult([t.left,0,0]).exit();if("function"==typeof t.left||"function"==typeof t.right)throw new Error("functions are not supported");if(t.leftType=null===t.left?"null":typeof t.left,t.rightType=null===t.right?"null":typeof t.right,t.leftType!==t.rightType)return void t.setResult([t.left,t.right]).exit();if("boolean"===t.leftType||"number"===t.leftType)return void t.setResult([t.left,t.right]).exit();if("object"===t.leftType&&(t.leftIsArray=isArray(t.left)),"object"===t.rightType&&(t.rightIsArray=isArray(t.right)),t.leftIsArray!==t.rightIsArray)return void t.setResult([t.left,t.right]).exit();if(t.left instanceof RegExp){if(!(t.right instanceof RegExp))return void t.setResult([t.left,t.right]).exit();t.setResult([t.left.toString(),t.right.toString()]).exit()}};diffFilter.filterName="trivial";var patchFilter=function(t){if(void 0===t.delta)return void t.setResult(t.left).exit();if(t.nested=!isArray(t.delta),!t.nested){if(1===t.delta.length)return void t.setResult(t.delta[0]).exit();if(2===t.delta.length){if(t.left instanceof RegExp){var e=/^\/(.*)\/([gimyu]+)$/.exec(t.delta[1]);if(e)return void t.setResult(new RegExp(e[1],e[2])).exit()}return void t.setResult(t.delta[1]).exit()}return 3===t.delta.length&&0===t.delta[2]?void t.setResult(void 0).exit():void 0}};patchFilter.filterName="trivial";var reverseFilter=function(t){return void 0===t.delta?void t.setResult(t.delta).exit():(t.nested=!isArray(t.delta),t.nested?void 0:1===t.delta.length?void t.setResult([t.delta[0],0,0]).exit():2===t.delta.length?void t.setResult([t.delta[1],t.delta[0]]).exit():3===t.delta.length&&0===t.delta[2]?void t.setResult([t.delta[0]]).exit():void 0)};reverseFilter.filterName="trivial",exports.diffFilter=diffFilter,exports.patchFilter=patchFilter,exports.reverseFilter=reverseFilter;
},{}],17:[function(require,module,exports){
var Pipe=function(t){this.name=t,this.filters=[]};Pipe.prototype.process=function(t){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var e=this.debug,r=this.filters.length,i=t,s=0;s<r;s++){var o=this.filters[s];if(e&&this.log("filter: "+o.filterName),o(i),"object"==typeof i&&i.exiting){i.exiting=!1;break}}!i.next&&this.resultCheck&&this.resultCheck(i)},Pipe.prototype.log=function(t){console.log("[jsondiffpatch] "+this.name+" pipe, "+t)},Pipe.prototype.append=function(){return this.filters.push.apply(this.filters,arguments),this},Pipe.prototype.prepend=function(){return this.filters.unshift.apply(this.filters,arguments),this},Pipe.prototype.indexOf=function(t){if(!t)throw new Error("a filter name is required");for(var e=0;e<this.filters.length;e++){if(this.filters[e].filterName===t)return e}throw new Error("filter not found: "+t)},Pipe.prototype.list=function(){for(var t=[],e=0;e<this.filters.length;e++){var r=this.filters[e];t.push(r.filterName)}return t},Pipe.prototype.after=function(t){var e=this.indexOf(t),r=Array.prototype.slice.call(arguments,1);if(!r.length)throw new Error("a filter is required");return r.unshift(e+1,0),Array.prototype.splice.apply(this.filters,r),this},Pipe.prototype.before=function(t){var e=this.indexOf(t),r=Array.prototype.slice.call(arguments,1);if(!r.length)throw new Error("a filter is required");return r.unshift(e,0),Array.prototype.splice.apply(this.filters,r),this},Pipe.prototype.clear=function(){return this.filters.length=0,this},Pipe.prototype.shouldHaveResult=function(t){if(!1===t)return void(this.resultCheck=null);if(!this.resultCheck){var e=this;return this.resultCheck=function(t){if(!t.hasResult){console.log(t);var r=new Error(e.name+" failed");throw r.noResult=!0,r}},this}},exports.Pipe=Pipe;
},{}],18:[function(require,module,exports){
var Processor=function(e){this.selfOptions=e||{},this.pipes={}};Processor.prototype.options=function(e){return e&&(this.selfOptions=e),this.selfOptions},Processor.prototype.pipe=function(e,s){if("string"==typeof e){if(void 0===s)return this.pipes[e];this.pipes[e]=s}if(e&&e.name){if(s=e,s.processor===this)return s;this.pipes[s.name]=s}return s.processor=this,s},Processor.prototype.process=function(e,s){var t=e;t.options=this.options();for(var r,o,i=s||e.pipe||"default";i;)void 0!==t.nextAfterChildren&&(t.next=t.nextAfterChildren,t.nextAfterChildren=null),"string"==typeof i&&(i=this.pipe(i)),i.process(t),o=t,r=i,i=null,t&&t.next&&(t=t.next,i=o.nextPipe||t.pipe||r);return t.hasResult?t.result:void 0},exports.Processor=Processor;
},{}]},{},[1])(1)
});


//# sourceMappingURL=jsondiffpatch.min.map